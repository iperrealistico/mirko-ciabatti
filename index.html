<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Mirko Ciabatti - Director of Photography / Direttore della fotografia in Italia</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Portfolio di Mirko Ciabatti, director of photography e direttore della fotografia con base in Italia. Selezione di lavori per cinema, pubblicità, videoclip e documentari.">
  <meta name="robots" content="index,follow">

  <!-- Canonical (aggiorna con il dominio finale) -->
  <link rel="canonical" href="https://mirkociabatti.github.io/">

  <!-- Hreflang per varianti lingua sulla stessa pagina -->
  <link rel="alternate" hreflang="en" href="https://mirkociabatti.github.io/?lang=en">
  <link rel="alternate" hreflang="it" href="https://mirkociabatti.github.io/?lang=it">
  <link rel="alternate" hreflang="x-default" href="https://mirkociabatti.github.io/">

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Mirko Ciabatti - Director of Photography in Italy">
  <meta property="og:description" content="Director of photography e direttore della fotografia con base in Italia. Selezione di lavori per cinema, pubblicità, videoclip e documentari.">
  <meta property="og:url" content="https://mirkociabatti.github.io/">
  <!-- Placeholder image, sostituisci con una tua cover -->
  <meta property="og:image" content="https://mirkociabatti.github.io/cover.jpg">

  <!-- Twitter Cards -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Mirko Ciabatti - Director of Photography in Italy">
  <meta name="twitter:description" content="Director of photography e direttore della fotografia con base in Italia. Selezione di lavori per cinema, pubblicità, videoclip e documentari.">
  <meta name="twitter:image" content="https://mirkociabatti.github.io/cover.jpg">

  <!-- Performance hints -->
  <link rel="preconnect" href="https://vimeo.com" crossorigin>
  <link rel="preconnect" href="https://i.vimeocdn.com" crossorigin>
  <meta name="theme-color" content="#000000">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Space+Grotesk:wght@400;500;600&display=swap" rel="stylesheet">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- Schema.org Person -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Person",
    "name": "Mirko Ciabatti",
    "jobTitle": "Director of Photography",
    "alternateName": [
      "Direttore della fotografia",
      "DOP",
      "Cinematographer"
    ],
    "url": "https://mirkociabatti.github.io/",
    "sameAs": [
      "https://vimeo.com/mirkociabatti",
      "https://www.instagram.com/mirko_ciabatti/?hl=en"
    ],
    "nationality": "Italian",
    "knowsLanguage": ["it", "en"],
    "description": "Mirko Ciabatti è un director of photography con base in Italia. Lavora su film, spot, videoclip e documentari con uno stile attento alla luce e alla composizione."
  }
  </script>

  <style>
    :root {
      color-scheme: dark;
      --bg-color: #000000;
      --text-color: #f5f5f5;
      --accent-color: #ffffff;
      --muted-color: #aaaaaa;
      --card-bg: #111111;
      --border-color: #222222;
      --focus-outline: #ffffff;
      --max-width: 1100px;
      --transition-speed: 0.18s;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html, body {
      height: 100%;
      scroll-behavior: smooth;
    }

    body {
      font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background-color: var(--bg-color);
      color: var(--text-color);
      -webkit-font-smoothing: antialiased;
    }

    a {
      color: var(--accent-color);
      text-decoration: none;
    }

    a:hover,
    a:focus-visible {
      text-decoration: none;
    }

    .site {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .site__inner {
      max-width: var(--max-width);
      margin: 0 auto;
      padding: 1.5rem 1.25rem 2rem;
    }

    header.hero {
      padding-top: 2.5rem;
      padding-bottom: 2rem;
    }

    .hero__eyebrow {
      font-family: "Space Grotesk", system-ui, sans-serif;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      font-size: 0.75rem;
      color: var(--muted-color);
      margin-bottom: 0.75rem;
    }

    .hero__title {
      font-family: "Space Grotesk", system-ui, sans-serif;
      font-size: clamp(2rem, 4vw, 2.6rem);
      font-weight: 600;
      margin-bottom: 0.4rem;
    }

    .hero__subtitle {
      font-size: 1rem;
      color: var(--muted-color);
      margin-bottom: 1.5rem;
    }

    .hero__text {
      max-width: 40rem;
      font-size: 0.98rem;
      line-height: 1.6;
      margin-bottom: 1.25rem;
    }

    .hero__text + .hero__text {
      margin-top: 0.5rem;
    }

    .hero__links {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      margin-top: 1rem;
    }

    .hero__link {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      padding: 0.4rem 0.9rem;
      border-radius: 999px;
      border: 1px solid var(--border-color);
      font-size: 0.86rem;
      text-decoration: none;
      background: rgba(255, 255, 255, 0.02);
      transition: border-color var(--transition-speed) ease, background-color var(--transition-speed) ease, transform var(--transition-speed) ease;
      white-space: nowrap;
    }

    .hero__link-icon {
      font-size: 0.85rem;
    }

    .hero__link:hover,
    .hero__link:focus-visible {
      border-color: var(--accent-color);
      background: rgba(255, 255, 255, 0.06);
      text-decoration: none;
      transform: translateY(-1px);
    }

    .hero__link-label {
      text-transform: uppercase;
      letter-spacing: 0.12em;
      font-size: 0.7rem;
      color: var(--muted-color);
    }

    .hero__link-slash {
      opacity: 0.8;
    }

    main {
      flex: 1;
    }

    section {
      padding: 1.5rem 0;
    }

    .section__header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 1rem;
      margin-bottom: 1.25rem;
    }

    .section__title {
      font-family: "Space Grotesk", system-ui, sans-serif;
      font-size: 1.1rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
    }

    .section__description {
      font-size: 0.9rem;
      color: var(--muted-color);
      max-width: 24rem;
    }

    .videos-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1rem;
    }

    @media (min-width: 640px) {
      .videos-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    @media (min-width: 1024px) {
      .videos-grid {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
    }

    .video-card {
      background-color: var(--card-bg);
      border-radius: 0.75rem;
      overflow: hidden;
      border: 1px solid var(--border-color);
      display: flex;
      flex-direction: column;
      min-height: 0;
      transition: transform var(--transition-speed) ease, border-color var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
    }

    .video-card__link {
      display: flex;
      flex-direction: column;
      flex: 1;
      text-decoration: none;
      color: inherit;
    }

    .video-card__link:hover,
    .video-card__link:focus-visible {
      text-decoration: none;
    }

    .video-card:hover,
    .video-card:focus-within {
      transform: translateY(-2px);
      border-color: var(--accent-color);
      box-shadow: 0 14px 30px rgba(0, 0, 0, 0.7);
    }

    .video-card__thumb {
      position: relative;
      width: 100%;
      aspect-ratio: 16 / 9;
      overflow: hidden;
      background: #181818;
    }

    .video-card__thumb[data-loading="true"] {
      animation: thumbPulse 1.4s ease-in-out infinite;
    }

    @keyframes thumbPulse {
      0% { opacity: 0.7; }
      50% { opacity: 1; }
      100% { opacity: 0.7; }
    }

    .video-card__thumb img {
      width: 100%;
      height: 100%;
      display: block;
      object-fit: cover;
      opacity: 0;
      transition: opacity 0.25s ease-out;
    }

    .video-card__thumb[data-loading="false"] img {
      opacity: 1;
    }

    .video-card__play-badge {
      position: absolute;
      inset: auto 0 0 auto;
      margin: 0.6rem;
      background: rgba(0, 0, 0, 0.7);
      border-radius: 999px;
      padding: 0.3rem 0.7rem;
      font-size: 0.72rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      color: #f5f5f5;
    }

    .video-card__play-dot {
      width: 0.45rem;
      height: 0.45rem;
      border-radius: 999px;
      border: 2px solid #f5f5f5;
      position: relative;
    }

    .video-card__play-dot::after {
      content: "";
      position: absolute;
      left: 54%;
      top: 50%;
      transform: translate(-50%, -50%);
      border-style: solid;
      border-width: 0.16rem 0 0.16rem 0.27rem;
      border-color: transparent transparent transparent #f5f5f5;
    }

    .video-card__body {
      padding: 0.8rem 0.85rem 0.9rem;
      display: flex;
      flex-direction: column;
      gap: 0.2rem;
    }

    .video-card__title {
      font-size: 0.96rem;
      font-weight: 500;
      line-height: 1.4;
    }

    .video-card__meta {
      font-size: 0.78rem;
      color: var(--muted-color);
      text-transform: uppercase;
      letter-spacing: 0.16em;
    }

    .video-card__skeleton {
      background: linear-gradient(90deg, #1a1a1a 0%, #222222 40%, #1a1a1a 80%);
      background-size: 200% 100%;
      animation: shimmer 1.3s infinite linear;
      width: 70%;
      height: 0.8rem;
      border-radius: 999px;
      margin-top: 0.2rem;
    }

    @keyframes shimmer {
      0% { background-position: -200% 0; }
      100% { background-position: 200% 0; }
    }

    .videos-grid__message {
      font-size: 0.9rem;
      color: var(--muted-color);
      margin-top: 0.5rem;
    }

    .contact {
      border-top: 1px solid var(--border-color);
      margin-top: 2.5rem;
      padding-top: 1.5rem;
      font-size: 0.9rem;
      color: var(--muted-color);
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem 1.5rem;
    }

    .contact__item-label {
      text-transform: uppercase;
      letter-spacing: 0.16em;
      font-size: 0.72rem;
      color: var(--muted-color);
    }

    .contact__item-value {
      font-size: 0.9rem;
    }

    footer.site-footer {
      border-top: 1px solid var(--border-color);
      padding: 0.8rem 1.25rem;
      font-size: 0.75rem;
      color: var(--muted-color);
    }

    .site-footer__inner {
      max-width: var(--max-width);
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 0.5rem;
    }

    .site-footer__right {
      text-align: right;
      font-variant-numeric: tabular-nums;
    }

    .site-footer__right i {
      margin-right: 0.35rem;
    }

    .skip-link {
      position: absolute;
      left: -999px;
      top: auto;
      width: 1px;
      height: 1px;
      overflow: hidden;
    }

    .skip-link:focus-visible {
      position: static;
      width: auto;
      height: auto;
      padding: 0.4rem 0.7rem;
      margin: 0.5rem 0;
      background: #ffffff;
      color: #000000;
      border-radius: 999px;
      outline: none;
      z-index: 100;
    }

    :focus-visible {
      outline: 2px solid var(--focus-outline);
      outline-offset: 3px;
    }

    .top-bar {
      display: flex;
      justify-content: flex-end;
      align-items: center;
      gap: 0.75rem;
      margin-bottom: 0.75rem;
    }

    .lang-switch {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      font-size: 0.78rem;
      color: var(--muted-color);
    }

    .lang-switch__icon {
      font-size: 0.9rem;
      color: var(--muted-color);
    }

    .lang-switch__btn {
      border: 1px solid var(--border-color);
      background: transparent;
      color: var(--muted-color);
      border-radius: 999px;
      padding: 0.1rem 0.55rem;
      font-size: 0.75rem;
      font-family: "Inter", system-ui, sans-serif;
      cursor: pointer;
      transition: background-color var(--transition-speed) ease, border-color var(--transition-speed) ease, color var(--transition-speed) ease, transform var(--transition-speed) ease;
    }

    .lang-switch__btn:hover,
    .lang-switch__btn:focus-visible {
      border-color: var(--accent-color);
      color: var(--accent-color);
      transform: translateY(-1px);
    }

    .lang-switch__btn--active {
      background: #ffffff;
      color: #000000;
      border-color: #ffffff;
    }

    @media (prefers-reduced-motion: reduce) {
      * {
        scroll-behavior: auto;
        animation-duration: 0.001ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.001ms !important;
      }
    }
  </style>
</head>
<body class="site">
  <div class="site__inner">
    <a href="#work" class="skip-link" id="skip-link">Skip to selected work</a>

    <div class="top-bar" aria-label="Language selector">
      <div class="lang-switch">
        <i class="fa-solid fa-globe lang-switch__icon" aria-hidden="true"></i>
        <button type="button" class="lang-switch__btn lang-switch__btn--active" data-lang="en" aria-label="Switch to English">EN</button>
        <button type="button" class="lang-switch__btn" data-lang="it" aria-label="Passa all'italiano">IT</button>
      </div>
    </div>

    <header class="hero">
      <div class="hero__eyebrow" id="hero-eyebrow">Director of photography</div>
      <h1 class="hero__title" id="hero-title">Mirko Ciabatti</h1>
      <p class="hero__subtitle" id="hero-subtitle">Director of Photography · Italy</p>

      <p class="hero__text" id="hero-text-1">
        Mirko Ciabatti is a director of photography based in Italy. He works on films, commercials, music videos and documentaries, building each frame from light, movement and a clean sense of composition.
      </p>
      <p class="hero__text" id="hero-text-2">
        He collaborates with directors and production companies across Europe, moving between narrative and commercial sets. He speaks Italian and English and is available for studio and on-location productions.
      </p>

      <div class="hero__links">
        <a class="hero__link" href="https://vimeo.com/mirkociabatti" target="_blank" rel="noopener noreferrer me" aria-label="Vimeo portfolio of Mirko Ciabatti">
          <i class="fa-brands fa-vimeo-v hero__link-icon" aria-hidden="true"></i>
          <span class="hero__link-label" id="hero-link-vimeo-label">Portfolio</span>
          <span class="hero__link-slash" id="hero-link-vimeo-suffix">/ Vimeo</span>
        </a>
        <a class="hero__link" href="https://www.instagram.com/mirko_ciabatti/?hl=en" target="_blank" rel="noopener noreferrer me" aria-label="Instagram profile of Mirko Ciabatti">
          <i class="fa-brands fa-instagram hero__link-icon" aria-hidden="true"></i>
          <span class="hero__link-label" id="hero-link-ig-label">Stills</span>
          <span class="hero__link-slash" id="hero-link-ig-suffix">/ Instagram</span>
        </a>
      </div>
    </header>

    <main>
      <section id="work" aria-labelledby="work-title">
        <div class="section__header">
          <h2 class="section__title" id="work-title">Selected work</h2>
          <p class="section__description" id="work-description">
            A curated selection of cinematography work by Mirko Ciabatti, including commercials, music videos and narrative projects shot in Italy and abroad.
          </p>
        </div>

        <div id="videos-grid" class="videos-grid" aria-live="polite">
          <!-- Cards video generate dal JavaScript -->
        </div>
        <p id="videos-message" class="videos-grid__message" role="status" aria-live="polite"></p>
      </section>

      <section aria-label="Contacts and base">
        <div class="contact">
          <div class="contact__item">
            <div class="contact__item-label" id="contact-label">Contact</div>
            <div class="contact__item-value">
              <a href="mailto:info@mirkociabatti.com">info@mirkociabatti.com</a>
            </div>
          </div>
          <div class="contact__item">
            <div class="contact__item-label" id="base-label">Base</div>
            <div class="contact__item-value" id="base-value">
              Italy · available for international productions
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <footer class="site-footer">
    <div class="site-footer__inner">
      <div>
        © <span id="year"></span> Mirko Ciabatti. Director of Photography.
      </div>
      <div class="site-footer__right" id="footer-right">
        <i class="fa-solid fa-cookie-bite" aria-hidden="true"></i>
        This website uses no cookies or trackers.
      </div>
    </div>
  </footer>

  <script>
    // Imposta anno dinamico nel footer
    document.getElementById("year").textContent = new Date().getFullYear();

    const videosGrid = document.getElementById("videos-grid");
    const videosMessage = document.getElementById("videos-message");

    function createVideoCardSkeleton(vimeoUrl) {
      const card = document.createElement("article");
      card.className = "video-card";

      const link = document.createElement("a");
      link.className = "video-card__link";
      link.href = vimeoUrl;
      link.target = "_blank";
      link.rel = "noopener noreferrer";

      const thumb = document.createElement("div");
      thumb.className = "video-card__thumb";
      thumb.dataset.loading = "true";

      const img = document.createElement("img");
      img.loading = "lazy";
      img.decoding = "async";
      img.alt = "Video by Mirko Ciabatti on Vimeo";
      thumb.appendChild(img);

      const badge = document.createElement("div");
      badge.className = "video-card__play-badge";
      const playDot = document.createElement("span");
      playDot.className = "video-card__play-dot";
      const badgeText = document.createElement("span");
      badgeText.textContent = "Play on Vimeo";
      badge.appendChild(playDot);
      badge.appendChild(badgeText);
      thumb.appendChild(badge);

      const body = document.createElement("div");
      body.className = "video-card__body";

      const title = document.createElement("h3");
      title.className = "video-card__title";
      title.textContent = "Loading title";

      const meta = document.createElement("div");
      meta.className = "video-card__meta";
      meta.textContent = "Vimeo";

      const skeleton = document.createElement("div");
      skeleton.className = "video-card__skeleton";

      body.appendChild(title);
      body.appendChild(meta);
      body.appendChild(skeleton);

      link.appendChild(thumb);
      link.appendChild(body);
      card.appendChild(link);

      // Gestione fade in
      img.addEventListener("load", () => {
        thumb.dataset.loading = "false";
      });

      img.addEventListener("error", () => {
        thumb.dataset.loading = "false";
      });

      return { card, img, title, meta, skeleton, thumb };
    }

    function extractVimeoId(urlString) {
      try {
        const url = new URL(urlString);
        const segments = url.pathname.split("/").filter(Boolean);
        if (!segments.length) return null;
        return segments[segments.length - 1];
      } catch (e) {
        return null;
      }
    }

    async function loadVideos() {
      try {
        const response = await fetch("videos.txt", { cache: "no-cache" });
        if (!response.ok) {
          throw new Error("Impossibile leggere videos.txt");
        }
        const text = await response.text();
        const lines = text
          .split(/\r?\n/)
          .map(line => line.trim())
          .filter(line => line.length && !line.startsWith("#"));

        if (!lines.length) {
          videosMessage.textContent = "No videos found. Add Vimeo URLs in videos.txt, one per line.";
          return;
        }

        videosMessage.textContent = "";

        const cards = [];

        // Prima creo tutte le card in modalità scheletro
        for (const vimeoUrl of lines) {
          const { card, img, title, meta, skeleton, thumb } = createVideoCardSkeleton(vimeoUrl);
          videosGrid.appendChild(card);
          cards.push({ vimeoUrl, img, title, meta, skeleton, thumb });
        }

        // Poi popolo i dati tramite oEmbed
        for (const item of cards) {
          const { vimeoUrl, img, title, meta, skeleton } = item;
          const oembedApi = "https://vimeo.com/api/oembed.json?url=" + encodeURIComponent(vimeoUrl);

          try {
            const oembedResponse = await fetch(oembedApi);
            if (!oembedResponse.ok) {
              throw new Error("Errore oEmbed");
            }
            const data = await oembedResponse.json();

            if (data.thumbnail_url) {
              img.src = data.thumbnail_url;
            } else {
              img.src = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1600' height='900'%3E%3Crect width='100%25' height='100%25' fill='%23000000'/%3E%3C/svg%3E";
            }

            if (data.title) {
              title.textContent = data.title;
            } else {
              title.textContent = "Video on Vimeo";
            }

            meta.textContent = "Vimeo" + (data.duration ? " · " + Math.round(data.duration) + "s" : "");
            skeleton.remove();
          } catch (error) {
            img.src = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1600' height='900'%3E%3Crect width='100%25' height='100%25' fill='%23000000'/%3E%3C/svg%3E";
            title.textContent = "Video on Vimeo";
            meta.textContent = "Vimeo";
            skeleton.remove();
          }
        }
      } catch (error) {
        videosMessage.textContent = "Error loading videos. Check that videos.txt is present next to index.html.";
      }
    }

    // Gestione lingue
    const translations = {
      en: {
        htmlLang: "en",
        skipLink: "Skip to selected work",
        heroEyebrow: "Director of photography",
        heroSubtitle: "Director of Photography · Italy",
        heroText1: "Mirko Ciabatti is a director of photography based in Italy. He works on films, commercials, music videos and documentaries, building each frame from light, movement and a clean sense of composition.",
        heroText2: "He collaborates with directors and production companies across Europe, moving between narrative and commercial sets. He speaks Italian and English and is available for studio and on-location productions.",
        heroLinkVimeoLabel: "Portfolio",
        heroLinkVimeoSuffix: "/ Vimeo",
        heroLinkIgLabel: "Stills",
        heroLinkIgSuffix: "/ Instagram",
        workTitle: "Selected work",
        workDescription: "A curated selection of cinematography work by Mirko Ciabatti, including commercials, music videos and narrative projects shot in Italy and abroad.",
        contactLabel: "Contact",
        baseLabel: "Base",
        baseValue: "Italy · available for international productions",
        footerRight: "This website uses no cookies or trackers.",
        videosEmpty: "No videos found. Add Vimeo URLs in videos.txt, one per line.",
        videosError: "Error loading videos. Check that videos.txt is present next to index.html."
      },
      it: {
        htmlLang: "it",
        skipLink: "Salta alla selezione di lavori",
        heroEyebrow: "Direttore della fotografia",
        heroSubtitle: "Direttore della fotografia · Italia",
        heroText1: "Mirko Ciabatti è un direttore della fotografia con base in Italia. Lavora su film, spot, videoclip e documentari, costruendo ogni inquadratura a partire dalla luce, dal movimento di macchina e da una composizione essenziale.",
        heroText2: "Collabora con registi e produzioni in Italia e in Europa, alternando set narrativi e commerciali. Parla italiano e inglese ed è disponibile per produzioni in studio e in esterni.",
        heroLinkVimeoLabel: "Portfolio",
        heroLinkVimeoSuffix: "/ Vimeo",
        heroLinkIgLabel: "Stills",
        heroLinkIgSuffix: "/ Instagram",
        workTitle: "Lavori selezionati",
        workDescription: "Una selezione curata di lavori di fotografia cinematografica firmati da Mirko Ciabatti: spot, videoclip e progetti narrativi girati in Italia e all'estero.",
        contactLabel: "Contatti",
        baseLabel: "Base",
        baseValue: "Italia · disponibile per produzioni internazionali",
        footerRight: "Questo sito non utilizza cookie o sistemi di tracciamento.",
        videosEmpty: "Nessun video trovato. Aggiungi URL Vimeo in videos.txt, uno per riga.",
        videosError: "Errore nel caricamento dei video. Controlla che videos.txt sia presente nella stessa cartella di index.html."
      }
    };

    function setLanguage(lang) {
      const t = translations[lang] || translations.en;

      document.documentElement.lang = t.htmlLang;

      document.getElementById("skip-link").textContent = t.skipLink;
      document.getElementById("hero-eyebrow").textContent = t.heroEyebrow;
      document.getElementById("hero-subtitle").textContent = t.heroSubtitle;
      document.getElementById("hero-text-1").textContent = t.heroText1;
      document.getElementById("hero-text-2").textContent = t.heroText2;
      document.getElementById("hero-link-vimeo-label").textContent = t.heroLinkVimeoLabel;
      document.getElementById("hero-link-vimeo-suffix").textContent = t.heroLinkVimeoSuffix;
      document.getElementById("hero-link-ig-label").textContent = t.heroLinkIgLabel;
      document.getElementById("hero-link-ig-suffix").textContent = t.heroLinkIgSuffix;
      document.getElementById("work-title").textContent = t.workTitle;
      document.getElementById("work-description").textContent = t.workDescription;
      document.getElementById("contact-label").textContent = t.contactLabel;
      document.getElementById("base-label").textContent = t.baseLabel;
      document.getElementById("base-value").textContent = t.baseValue;
      document.getElementById("footer-right").innerHTML =
        (t.htmlLang === "en"
          ? "<i class='fa-solid fa-cookie-bite' aria-hidden='true'></i> " + t.footerRight
          : "<i class='fa-solid fa-cookie-bite' aria-hidden='true'></i> " + t.footerRight);

      // Aggiorna messaggi di errore/empty se servono
      if (videosMessage.dataset.state === "empty") {
        videosMessage.textContent = t.videosEmpty;
      } else if (videosMessage.dataset.state === "error") {
        videosMessage.textContent = t.videosError;
      }

      // Aggiorna top bar stato attivo
      const buttons = document.querySelectorAll(".lang-switch__btn");
      buttons.forEach(btn => {
        if (btn.dataset.lang === lang) {
          btn.classList.add("lang-switch__btn--active");
        } else {
          btn.classList.remove("lang-switch__btn--active");
        }
      });
    }

    function getInitialLang() {
      const url = new URL(window.location.href);
      const param = url.searchParams.get("lang");
      if (param === "it") return "it";
      return "en";
    }

    function initLanguageSwitcher() {
      const initialLang = getInitialLang();
      setLanguage(initialLang);

      const buttons = document.querySelectorAll(".lang-switch__btn");
      buttons.forEach(btn => {
        btn.addEventListener("click", () => {
          const lang = btn.dataset.lang;
          const url = new URL(window.location.href);
          url.searchParams.set("lang", lang);
          window.history.replaceState({}, "", url.toString());
          setLanguage(lang);
        });
      });
    }

    document.addEventListener("DOMContentLoaded", () => {
      initLanguageSwitcher();
      loadVideos();
    });
  </script>
</body>
</html>
